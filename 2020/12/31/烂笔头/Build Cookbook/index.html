<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"edward.org.cn","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="http:&#x2F;&#x2F;www.kandroid.org&#x2F;online-pdk&#x2F;guide&#x2F;build_cookbook.html Build Cookbook In this document Simple APK APK Dependent on static .jar file APK signed with the platform key APK that signed with vendor k">
<meta property="og:type" content="article">
<meta property="og:title" content="Build Cookbook">
<meta property="og:url" content="http://edward.org.cn/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/Build%20Cookbook/index.html">
<meta property="og:site_name" content="点点滴滴">
<meta property="og:description" content="http:&#x2F;&#x2F;www.kandroid.org&#x2F;online-pdk&#x2F;guide&#x2F;build_cookbook.html Build Cookbook In this document Simple APK APK Dependent on static .jar file APK signed with the platform key APK that signed with vendor k">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-12-31T06:48:01.033Z">
<meta property="article:modified_time" content="2020-01-16T04:37:32.449Z">
<meta property="article:author" content="Edward">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://edward.org.cn/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/Build%20Cookbook/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Build Cookbook | 点点滴滴</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a92ed22eafce466e7a7b17546bb0dc6f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">点点滴滴</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://edward.org.cn/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/Build%20Cookbook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.gif">
      <meta itemprop="name" content="Edward">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="点点滴滴">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Build Cookbook
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-31 14:48:01" itemprop="dateCreated datePublished" datetime="2020-12-31T14:48:01+08:00">2020-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-16 12:37:32" itemprop="dateModified" datetime="2020-01-16T12:37:32+08:00">2020-01-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%83%82%E7%AC%94%E5%A4%B4/" itemprop="url" rel="index"><span itemprop="name">烂笔头</span></a>
                </span>
            </span>

          
            <span id="/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/Build%20Cookbook/" class="post-meta-item leancloud_visitors" data-flag-title="Build Cookbook" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><a target="_blank" rel="noopener" href="http://www.kandroid.org/online-pdk/guide/build_cookbook.html">http://www.kandroid.org/online-pdk/guide/build_cookbook.html</a></p>
<p>Build Cookbook</p>
<p>In this document</p>
<p>Simple APK APK Dependent on static .jar file APK signed with the platform key APK that signed with vendor key Prebuilt APK Adding a Static Java Library Android.mk variables  </p>
<p>The Android Build Cookbook offers code snippets to help you quickly implement some common build tasks. For additional instruction, please see the other build documents in this section.</p>
<p>Building a simple APK</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="Build-all-java-files-in-the-java-subdirectory"><a href="#Build-all-java-files-in-the-java-subdirectory" class="headerlink" title="Build all java files in the java subdirectory"></a>Build all java files in the java subdirectory</h1><p>  LOCAL_SRC_FILES := $(call all-subdir-java-files)</p>
<h1 id="Name-of-the-APK-to-build"><a href="#Name-of-the-APK-to-build" class="headerlink" title="Name of the APK to build"></a>Name of the APK to build</h1><p>  LOCAL_PACKAGE_NAME := LocalPackage</p>
<h1 id="Tell-it-to-build-an-APK"><a href="#Tell-it-to-build-an-APK" class="headerlink" title="Tell it to build an APK"></a>Tell it to build an APK</h1><p>  include $(BUILD_PACKAGE)</p>
<p>Building a APK that depends on a static .jar file</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="List-of-static-libraries-to-include-in-the-package"><a href="#List-of-static-libraries-to-include-in-the-package" class="headerlink" title="List of static libraries to include in the package"></a>List of static libraries to include in the package</h1><p>  LOCAL_STATIC_JAVA_LIBRARIES := static-library</p>
<h1 id="Build-all-java-files-in-the-java-subdirectory-1"><a href="#Build-all-java-files-in-the-java-subdirectory-1" class="headerlink" title="Build all java files in the java subdirectory"></a>Build all java files in the java subdirectory</h1><p>  LOCAL_SRC_FILES := $(call all-subdir-java-files)</p>
<h1 id="Name-of-the-APK-to-build-1"><a href="#Name-of-the-APK-to-build-1" class="headerlink" title="Name of the APK to build"></a>Name of the APK to build</h1><p>  LOCAL_PACKAGE_NAME := LocalPackage</p>
<h1 id="Tell-it-to-build-an-APK-1"><a href="#Tell-it-to-build-an-APK-1" class="headerlink" title="Tell it to build an APK"></a>Tell it to build an APK</h1><p>  include $(BUILD_PACKAGE)</p>
<p>Building a APK that should be signed with the platform key</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="Build-all-java-files-in-the-java-subdirectory-2"><a href="#Build-all-java-files-in-the-java-subdirectory-2" class="headerlink" title="Build all java files in the java subdirectory"></a>Build all java files in the java subdirectory</h1><p>  LOCAL_SRC_FILES := $(call all-subdir-java-files)</p>
<h1 id="Name-of-the-APK-to-build-2"><a href="#Name-of-the-APK-to-build-2" class="headerlink" title="Name of the APK to build"></a>Name of the APK to build</h1><p>  LOCAL_PACKAGE_NAME := LocalPackage</p>
<p>  LOCAL_CERTIFICATE := platform</p>
<h1 id="Tell-it-to-build-an-APK-2"><a href="#Tell-it-to-build-an-APK-2" class="headerlink" title="Tell it to build an APK"></a>Tell it to build an APK</h1><p>  include $(BUILD_PACKAGE)</p>
<p>Building a APK that should be signed with a specific vendor key</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="Build-all-java-files-in-the-java-subdirectory-3"><a href="#Build-all-java-files-in-the-java-subdirectory-3" class="headerlink" title="Build all java files in the java subdirectory"></a>Build all java files in the java subdirectory</h1><p>  LOCAL_SRC_FILES := $(call all-subdir-java-files)</p>
<h1 id="Name-of-the-APK-to-build-3"><a href="#Name-of-the-APK-to-build-3" class="headerlink" title="Name of the APK to build"></a>Name of the APK to build</h1><p>  LOCAL_PACKAGE_NAME := LocalPackage</p>
<p>  LOCAL_CERTIFICATE := vendor/example/certs/app</p>
<h1 id="Tell-it-to-build-an-APK-3"><a href="#Tell-it-to-build-an-APK-3" class="headerlink" title="Tell it to build an APK"></a>Tell it to build an APK</h1><p>  include $(BUILD_PACKAGE)</p>
<p>Adding a prebuilt APK</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="Module-name-should-match-apk-name-to-be-installed"><a href="#Module-name-should-match-apk-name-to-be-installed" class="headerlink" title="Module name should match apk name to be installed."></a>Module name should match apk name to be installed.</h1><p>  LOCAL_MODULE := LocalModuleName<br>  LOCAL_SRC_FILES := $(LOCAL_MODULE).apk<br>  LOCAL_MODULE_CLASS := APPS<br>  LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)</p>
<p>  include $(BUILD_PREBUILT)</p>
<p>Adding a Static Java Library</p>
<p>  LOCAL_PATH := $(call my-dir)<br>  include $(CLEAR_VARS)</p>
<h1 id="Build-all-java-files-in-the-java-subdirectory-4"><a href="#Build-all-java-files-in-the-java-subdirectory-4" class="headerlink" title="Build all java files in the java subdirectory"></a>Build all java files in the java subdirectory</h1><p>  LOCAL_SRC_FILES := $(call all-subdir-java-files)</p>
<h1 id="Any-libraries-that-this-library-depends-on"><a href="#Any-libraries-that-this-library-depends-on" class="headerlink" title="Any libraries that this library depends on"></a>Any libraries that this library depends on</h1><p>  LOCAL_JAVA_LIBRARIES := android.test.runner</p>
<h1 id="The-name-of-the-jar-file-to-create"><a href="#The-name-of-the-jar-file-to-create" class="headerlink" title="The name of the jar file to create"></a>The name of the jar file to create</h1><p>  LOCAL_MODULE := sample</p>
<h1 id="Build-a-static-jar-file"><a href="#Build-a-static-jar-file" class="headerlink" title="Build a static jar file."></a>Build a static jar file.</h1><p>  include $(BUILD_STATIC_JAVA_LIBRARY)</p>
<p>Android.mk Variables</p>
<p>These are the variables that you’ll commonly see in Android.mk files, listed alphabetically. First, a note on the variable naming:</p>
<p>LOCAL_ - These variables are set per-module. They are cleared by the include $(CLEAR_VARS) line, so you can rely on them being empty after including that file. Most of the variables you’ll use in most modules are LOCAL_ variables. PRIVATE_ - These variables are make-target-specific variables. That means they’re only usable within the commands for that module. It also means that they’re unlikely to change behind your back from modules that are included after yours. This link to the make documentation describes more about target-specific variables. HOST_ and TARGET_ - These contain the directories and definitions that are specific to either the host or the target builds. Do not set variables that start with HOST_ or TARGET_ in your makefiles. BUILD_ and CLEAR_VARS - These contain the names of well-defined template makefiles to include. Some examples are CLEAR_VARS and BUILD_HOST_PACKAGE. Any other name is fair-game for you to use in your Android.mk. However, remember that this is a non-recursive build system, so it is possible that your variable will be changed by another Android.mk included later, and be different when the commands for your rule / module are executed.  </p>
<p>Parameter  Description </p>
<p>LOCAL_AAPT_FLAGS  </p>
<p>LOCAL_ACP_UNAVAILABLE  </p>
<p>LOCAL_ADDITIONAL_JAVA_DIR  </p>
<p>LOCAL_AIDL_INCLUDES  </p>
<p>LOCAL_ALLOW_UNDEFINED_SYMBOLS  </p>
<p>LOCAL_ARM_MODE  </p>
<p>LOCAL_ASFLAGS  </p>
<p>LOCAL_ASSET_DIR  </p>
<p>LOCAL_ASSET_FILES In Android.mk files that include $(BUILD_PACKAGE) set this to the set of files you want built into your app. Usually:</p>
<p>LOCAL_ASSET_FILES += $(call find-subdir-assets)</p>
<p>LOCAL_BUILT_MODULE_STEM  </p>
<p>LOCAL_C_INCLUDES  </p>
<p>Additional directories to instruct the C/C++ compilers to look for header files in. These paths are rooted at the top of the tree. Use LOCAL_PATH if you have subdirectories of your own that you want in the include paths. For example:</p>
<p>LOCAL_C_INCLUDES += extlibs/zlib-1.2.3<br>LOCAL_C_INCLUDES += $(LOCAL_PATH)/src </p>
<p>You should not add subdirectories of include to LOCAL_C_INCLUDES, instead you should reference those files in the #includestatement with their subdirectories. For example:</p>
<p>#include &lt;utils/KeyedVector.h&gt;<br>not #include &lt;KeyedVector.h&gt; </p>
<p>LOCAL_CC If you want to use a different C compiler for this module, set LOCAL_CC to the path to the compiler. If LOCAL_CC is blank, the appropriate default compiler is used. </p>
<p>LOCAL_CERTIFICATE  </p>
<p>LOCAL_CFLAGS If you have additional flags to pass into the C or C++ compiler, add them here. For example:</p>
<p>LOCAL_CFLAGS += -DLIBUTILS_NATIVE=1</p>
<p>LOCAL_CLASSPATH  </p>
<p>LOCAL_COMPRESS_MODULE_SYMBOLS  </p>
<p>LOCAL_COPY_HEADERS  </p>
<p>The set of files to copy to the install include tree. You must also supply LOCAL_COPY_HEADERS_TO.</p>
<p>This is going away because copying headers messes up the error messages, and may lead to people editing those headers instead of the correct ones. It also makes it easier to do bad layering in the system, which we want to avoid. We also aren’t doing a C/C++ SDK, so there is no ultimate requirement to copy any headers.</p>
<p>LOCAL_COPY_HEADERS_TO  </p>
<p>The directory within &quot;include&quot; to copy the headers listed in LOCAL_COPY_HEADERS to.</p>
<p>This is going away because copying headers messes up the error messages, and may lead to people editing those headers instead of the correct ones. It also makes it easier to do bad layering in the system, which we want to avoid. We also aren’t doing a C/C++ SDK, so there is no ultimate requirement to copy any headers.</p>
<p>LOCAL_CPP_EXTENSION If your C++ files end in something other than &quot;.cpp&quot;, you can specify the custom extension here. For example:</p>
<p>LOCAL_CPP_EXTENSION := .cc</p>
<p>Note that all C++ files for a given module must have the same extension; it is not currently possible to mix different extensions. </p>
<p>LOCAL_CPPFLAGS If you have additional flags to pass into only the C++ compiler, add them here. For example:</p>
<p>LOCAL_CPPFLAGS += -ffriend-injection</p>
<p>LOCAL_CPPFLAGS is guaranteed to be after LOCAL_CFLAGS on the compile line, so you can use it to override flags listed inLOCAL_CFLAGS </p>
<p>LOCAL_CXX If you want to use a different C++ compiler for this module, set LOCAL_CXX to the path to the compiler. If LOCAL_CXX is blank, the appropriate default compiler is used. </p>
<p>LOCAL_DX_FLAGS  </p>
<p>LOCAL_EXPORT_PACKAGE_RESOURCES  </p>
<p>LOCAL_FORCE_STATIC_EXECUTABLE  </p>
<p>If your executable should be linked statically, set LOCAL_FORCE_STATIC_EXECUTABLE:=true. There is a very short list of libraries that we have in static form (currently only libc). This is really only used for executables in /sbin on the root filesystem.</p>
<p>LOCAL_GENERATED_SOURCES  </p>
<p>Files that you add to LOCAL_GENERATED_SOURCES will be automatically generated and then linked in when your module is built. See the Custom Tools template makefile for an example.</p>
<p>LOCAL_INSTRUMENTATION_FOR  </p>
<p>LOCAL_INSTRUMENTATION_FOR_PACKAGE_NAME  </p>
<p>LOCAL_INTERMEDIATE_SOURCES  </p>
<p>LOCAL_INTERMEDIATE_TARGETS  </p>
<p>LOCAL_IS_HOST_MODULE  </p>
<p>LOCAL_JAR_MANIFEST  </p>
<p>LOCAL_JARJAR_RULES  </p>
<p>LOCAL_JAVA_LIBRARIES  </p>
<p>When linking Java apps and libraries, LOCAL_JAVA_LIBRARIES specifies which sets of java classes to include. Currently there are two of these: core and framework. In most cases, it will look like this:</p>
<p>LOCAL_JAVA_LIBRARIES := core framework</p>
<p>Note that setting LOCAL_JAVA_LIBRARIES is not necessary (and is not allowed) when building an APK with &quot;include $(BUILD_PACKAGE)&quot;. The appropriate libraries will be included automatically.</p>
<p>LOCAL_JAVA_RESOURCE_DIRS  </p>
<p>LOCAL_JAVA_RESOURCE_FILES  </p>
<p>LOCAL_JNI_SHARED_LIBRARIES  </p>
<p>LOCAL_LDFLAGS  </p>
<p>You can pass additional flags to the linker by setting LOCAL_LDFLAGS. Keep in mind that the order of parameters is very important to ld, so test whatever you do on all platforms.</p>
<p>LOCAL_LDLIBS  </p>
<p>LOCAL_LDLIBS allows you to specify additional libraries that are not part of the build for your executable or library. Specify the libraries you want in -lxxx format; they’re passed directly to the link line. However, keep in mind that there will be no dependency generated for these libraries. It’s most useful in simulator builds where you want to use a library preinstalled on the host. The linker (ld) is a particularly fussy beast, so it’s sometimes necessary to pass other flags here if you’re doing something sneaky. Some examples:</p>
<p>LOCAL_LDLIBS += -lcurses -lpthread<br>LOCAL_LDLIBS += -Wl,-z,origin </p>
<p>LOCAL_MODULE LOCAL_MODULE is the name of what’s supposed to be generated from your Android.mk. For exmample, for libkjs, theLOCAL_MODULE is &quot;libkjs&quot; (the build system adds the appropriate suffix – .so .dylib .dll). For app modules, useLOCAL_PACKAGE_NAME instead of LOCAL_MODULE. </p>
<p>LOCAL_MODULE_PATH Instructs the build system to put the module somewhere other than what’s normal for its type. If you override this, make sure you also set LOCAL_UNSTRIPPED_PATH if it’s an executable or a shared library so the unstripped binary has somewhere to go. An error will occur if you forget to.</p>
<p>See Putting modules elsewhere for more.</p>
<p>LOCAL_MODULE_STEM  </p>
<p>LOCAL_MODULE_TAGS  </p>
<p>Set LOCAL_MODULE_TAGS to any number of whitespace-separated tags.</p>
<p>This variable controls what build flavors the package gets included in. For example:</p>
<p>user: include this in user/userdebug builds eng: include this in eng builds tests: the target is a testing target and makes it available for tests optional: don’t include this   </p>
<p>LOCAL_NO_DEFAULT_COMPILER_FLAGS  </p>
<p>LOCAL_NO_EMMA_COMPILE  </p>
<p>LOCAL_NO_EMMA_INSTRUMENT  </p>
<p>LOCAL_NO_STANDARD_LIBRARIES  </p>
<p>LOCAL_OVERRIDES_PACKAGES  </p>
<p>LOCAL_PACKAGE_NAME LOCAL_PACKAGE_NAME is the name of an app. For example, Dialer, Contacts, etc. </p>
<p>LOCAL_POST_PROCESS_COMMAND  </p>
<p>For host executables, you can specify a command to run on the module after it’s been linked. You might have to go through some contortions to get variables right because of early or late variable evaluation:</p>
<p>module := $(HOST_OUT_EXECUTABLES)/$(LOCAL_MODULE)<br>LOCAL_POST_PROCESS_COMMAND := /Developer/Tools/Rez -d <strong>DARWIN</strong> -t APPL<br>       -d <strong>WXMAC</strong> -o $(module) Carbon.r  </p>
<p>LOCAL_PREBUILT_EXECUTABLES When including $(BUILD_PREBUILT) or $(BUILD_HOST_PREBUILT), set these to executables that you want copied. They’re located automatically into the right bin directory. </p>
<p>LOCAL_PREBUILT_JAVA_LIBRARIES  </p>
<p>LOCAL_PREBUILT_LIBS When including $(BUILD_PREBUILT) or $(BUILD_HOST_PREBUILT), set these to libraries that you want copied. They’re located automatically into the right lib directory. </p>
<p>LOCAL_PREBUILT_OBJ_FILES  </p>
<p>LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES  </p>
<p>LOCAL_PRELINK_MODULE  </p>
<p>LOCAL_REQUIRED_MODULES  </p>
<p>Set LOCAL_REQUIRED_MODULES to any number of whitespace-separated module names, like &quot;libblah&quot; or &quot;Email&quot;. If this module is installed, all of the modules that it requires will be installed as well. This can be used to, e.g., ensure that necessary shared libraries or providers are installed when a given app is installed.</p>
<p>LOCAL_RESOURCE_DIR  </p>
<p>LOCAL_SDK_VERSION  </p>
<p>LOCAL_SHARED_LIBRARIES These are the libraries you directly link against. You don’t need to pass transitively included libraries. Specify the name without the suffix:</p>
<p>LOCAL_SHARED_LIBRARIES := <br>    libutils <br>    libui <br>    libaudio <br>    libexpat <br>    libsgl   </p>
<p>LOCAL_SRC_FILES The build system looks at LOCAL_SRC_FILES to know what source files to compile – .cpp .c .y .l .java. For lex and yacc files, it knows how to correctly do the intermediate .h and .c/.cpp files automatically. If the files are in a subdirectory of the one containing the Android.mk, prefix them with the directory name:</p>
<p>LOCAL_SRC_FILES := <br>    file1.cpp <br>    dir/file2.cpp  </p>
<p>LOCAL_STATIC_JAVA_LIBRARIES  </p>
<p>LOCAL_STATIC_LIBRARIES These are the static libraries that you want to include in your module. Mostly, we use shared libraries, but there are a couple of places, like executables in sbin and host executables where we use static libraries instead.</p>
<p>LOCAL_STATIC_LIBRARIES := <br>    libutils <br>    libtinyxml  </p>
<p>LOCAL_UNINSTALLABLE_MODULE  </p>
<p>LOCAL_UNSTRIPPED_PATH Instructs the build system to put the unstripped version of the module somewhere other than what’s normal for its type. Usually, you override this because you overrode LOCAL_MODULE_PATH for an executable or a shared library. If you overrodeLOCAL_MODULE_PATH, but not LOCAL_UNSTRIPPED_PATH, an error will occur.</p>
<p>See Putting modules elsewhere for more.</p>
<p>LOCAL_WHOLE_STATIC_LIBRARIES These are the static libraries that you want to include in your module without allowing the linker to remove dead code from them. This is mostly useful if you want to add a static library to a shared library and have the static library’s content exposed from the shared library.</p>
<p>LOCAL_WHOLE_STATIC_LIBRARIES := <br>    libsqlite3_android</p>
<p>LOCAL_YACCFLAGS Any flags to pass to invocations of yacc for your module. A known limitation here is that the flags will be the same for all invocations of YACC for your module. This can be fixed. If you ever need it to be, just ask.</p>
<p>LOCAL_YACCFLAGS := -p kjsyy</p>
<p>OVERRIDE_BUILT_MODULE_PATH </p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/BT%E6%90%9C%E6%97%B6%E9%97%B4/" rel="prev" title="BT搜时间">
      <i class="fa fa-chevron-left"></i> BT搜时间
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/12/31/%E7%83%82%E7%AC%94%E5%A4%B4/C+%EF%BC%8B%E4%B8%8D%E5%90%8C%E4%BA%8EC%E7%9A%84%E5%9C%B0%E6%96%B9/" rel="next" title="C+＋不同于C的地方">
      C+＋不同于C的地方 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-all-java-files-in-the-java-subdirectory"><span class="nav-number">1.</span> <span class="nav-text">Build all java files in the java subdirectory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Name-of-the-APK-to-build"><span class="nav-number">2.</span> <span class="nav-text">Name of the APK to build</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tell-it-to-build-an-APK"><span class="nav-number">3.</span> <span class="nav-text">Tell it to build an APK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#List-of-static-libraries-to-include-in-the-package"><span class="nav-number">4.</span> <span class="nav-text">List of static libraries to include in the package</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-all-java-files-in-the-java-subdirectory-1"><span class="nav-number">5.</span> <span class="nav-text">Build all java files in the java subdirectory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Name-of-the-APK-to-build-1"><span class="nav-number">6.</span> <span class="nav-text">Name of the APK to build</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tell-it-to-build-an-APK-1"><span class="nav-number">7.</span> <span class="nav-text">Tell it to build an APK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-all-java-files-in-the-java-subdirectory-2"><span class="nav-number">8.</span> <span class="nav-text">Build all java files in the java subdirectory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Name-of-the-APK-to-build-2"><span class="nav-number">9.</span> <span class="nav-text">Name of the APK to build</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tell-it-to-build-an-APK-2"><span class="nav-number">10.</span> <span class="nav-text">Tell it to build an APK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-all-java-files-in-the-java-subdirectory-3"><span class="nav-number">11.</span> <span class="nav-text">Build all java files in the java subdirectory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Name-of-the-APK-to-build-3"><span class="nav-number">12.</span> <span class="nav-text">Name of the APK to build</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tell-it-to-build-an-APK-3"><span class="nav-number">13.</span> <span class="nav-text">Tell it to build an APK</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Module-name-should-match-apk-name-to-be-installed"><span class="nav-number">14.</span> <span class="nav-text">Module name should match apk name to be installed.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-all-java-files-in-the-java-subdirectory-4"><span class="nav-number">15.</span> <span class="nav-text">Build all java files in the java subdirectory</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Any-libraries-that-this-library-depends-on"><span class="nav-number">16.</span> <span class="nav-text">Any libraries that this library depends on</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-name-of-the-jar-file-to-create"><span class="nav-number">17.</span> <span class="nav-text">The name of the jar file to create</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Build-a-static-jar-file"><span class="nav-number">18.</span> <span class="nav-text">Build a static jar file.</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Edward"
      src="/uploads/avatar.gif">
  <p class="site-author-name" itemprop="name">Edward</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">570</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Edward</span>
</div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"wxYx0BX9gaKA3XC4LuO2of0v-gzGzoHsz","app_key":"LQMcs6IDIE4YAm10vMsn9IYq","server_url":"https://wxyx0bx9.lc-cn-n1-shared.com","security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
